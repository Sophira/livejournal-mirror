<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>7. Functions</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="S2 Manual">
<link rel="up" href="langref.html" title="Chapter 4. Language Reference">
<link rel="prev" href="langref.classes.html" title="6. Classes">
<link rel="next" href="langref.layerinfo.html" title="8. layerinfo declarations">
<meta name="date" content="2008-Jun-03">
</head>
<body>
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">7. Functions</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="langref.classes.html">Prev</a> </td>
<th width="60%" align="center">Chapter 4. Language Reference</th>
<td width="20%" align="right"> <a accesskey="n" href="langref.layerinfo.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both" id="langref.functions">7. Functions</h2></div></div></div>
<p>Functions in S2 can be simple functions, methods of a class, or call
functions written in the backend language from the <code class="literal">builtin</code>
layer.</p>
<p>Functions can return data in any simple internal datatype, or
<span class="returnvalue">void</span> if no return data is required.</p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.functions.declaration">7.1. Declaration</h3></div></div></div>
<p>Declaring a function within a class is done as follows:
    </p>
<pre class="programlisting">class SomeClass { function do_stuff(int para1, string para2) : string;
    }</pre>
<p>This declares a function called <code class="methodname">do_stuff</code> in the
    <code class="classname">SomeClass</code> class with two parameters and which
    returns a string. The colon and type keyword may be omitted where a function will
    return <span class="returnvalue">void</span> (no value).</p>
<p>Functions outside classes are declared in the same way:
    </p>
<pre class="programlisting">function do_global_stuff(int para1, string para2);</pre>
<p>Functions outside classes do not need to be declared, but if they are
    not declared they must be defined before they are called.</p>
<p>Built-in functions can be declared in the core layer using the
    <code class="literal">builtin</code> keyword in the function prototype:
    </p>
<pre class="programlisting">function builtin ehtml(string s) : string; class string { function builtin ends_with (string sub) : bool;
    }</pre>
<p>Functions can have some or no parameters, in the latter case the
    parentheses may be omitted in declaration. If several functions of the same
    name exist with different parameters, they can be defined as follows:</p>
<pre class="programlisting">function dostuff(int para1); function dostuff;</pre>
<p>Non-class (global) functions can be implemented when they are
    declared:
    </p>
<pre class="programlisting">function do_global_stuff() { print "I'm doing stuff!";
    }</pre>
<p>Class functions (methods) must first be declared within the class
    they will apply to, and can then be implemented outside the class declaration as
    follows:
    </p>
<pre class="programlisting">function SomeClass::do_stuff() { print "I'm doing stuff!";
    }</pre>
<p>It is not permitted to implement a <code class="literal">builtin</code> function.
    These will instead be mapped onto some code written in the host language in
    the S2 backend.</p>
<p>Layouts are allowed to add new methods to a class without pre-declaration,
    but with a few special constraints. Firstly, the method must be declared
    and implemented before it is used. Secondly, the method name must begin
    with <code class="literal">lay_</code>, to avoid problems in the future when new
    methods may be added to the core layer with the same name.</p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.functions.calling">7.2. Calling</h3></div></div></div>
<p>Functions outside classes can be called using the following
    syntax:</p>
<pre class="programlisting">dostuff();
dostuff(5);</pre>
<p>Functions in classes are envoked from an instance of the class as
    follows:</p>
<pre class="programlisting">$thingy-&gt;dostuff(45,"boink");</pre>
<p>Note that the parentheses <span class="emphasis"><em>are</em></span> required when
envoking a function.</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="langref.classes.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="langref.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="langref.layerinfo.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">6. Classes </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 8. <code class="varname">layerinfo</code> declarations</td>
</tr>
</table>
</div>
</body>
</html>
