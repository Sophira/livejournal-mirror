<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>Chapter 3. Core BML blocks</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.55.0"><link rel="home" href="index.html" title="LiveJournal Server"><link rel="up" href="bml.index.html" title="The Better Markup Language"><link rel="previous" href="bml.flags.html" title="Chapter 2. BML Block Types"><link rel="next" href="bml.api.ref.html" title="API Documentation"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 3. Core BML blocks</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bml.flags.html">Prev</a> </td><th width="60%" align="center">The Better Markup Language</th><td width="20%" align="right"> <a accesskey="n" href="bml.api.ref.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><h1 class="title"><a name="bml.core"></a>Core <span class="abbrev">BML<br></span> blocks</h1></div></div><p>
    Core blocks are predefined blocks that are named with a leading underscore. 
    Most core blocks have a higher purpose than simple template use: 
  </p><div class="variablelist"><dl><dt><span class="term"><tt>_code</tt></span></dt><dd><p>
        <tt>&lt;?_code _code?&gt;</tt> blocks are perhaps the most useful feature of 
        BML outside of the ability to have global site templates. 
        These blocks allow template authors to embed pieces of executable Perl code 
        within the bml page that get executed on the server.
      </p><p>
      </p><p>
        The code you write gets executed in its own package (namespace) called 
        <tt>BMLCodeBlock::</tt>.
        Any variables you declare in one code block on a page without using 
        <tt>my</tt> are carried on to the next <tt>_code</tt> block.
      </p><p>
        Because the BML parser must evaluate everything on the page before sending the 
        HTTP headers, make sure you don't print anything. 
        Any output printed to <tt>STDOUT</tt> will just be interpreted as 
        HTTP headers. How the <tt>_code</tt> blocks work is 
        that you need to return a value at the end.
        Whatever value your code fragment returns is what the block evaluates to. 
        Usually what you end up doing is building a string, concatenating things to it 
        over and over, and then returning it at the end.
      </p></dd><dt><span class="term"><tt>_c</tt> - <tt>_comment</tt></span></dt><dd><p>
        Comment blocks are templates that do not get parsed into resultant text later, 
        and are useful when HTML style comments
        (&#8216;<tt>&lt;!-- --&gt;</tt>&#8217;) are not desired.
      </p></dd><dt><span class="term"><tt>_info</tt></span></dt><dd><p>
        Information blocks can be used to include special information about the particular 
        BML page the block is contained in. 
        </p><div class="variablelist"><p class="title"><b><tt>_info</tt> directives</b></p><dl><dt><span class="term"><tt>package</tt></span></dt><dd><p>Specify and load a required package</p></dd><dt><span class="term"><tt>nocache</tt></span></dt><dd><p>Specified page is dynamic, and shouldn't be cached</p></dd><dt><span class="term"><tt>static</tt></span></dt><dd><p>Specified page is static; ok to cache</p></dd><dt><span class="term"><tt>noheaders</tt></span></dt><dd><p>Turn off default BML headers</p></dd><dt><span class="term"><tt>nocontent</tt></span></dt><dd><p>Specify that page has no cacheable content</p></dd><dt><span class="term"><tt>localblocks</tt></span></dt><dd><p>Declare page specific BML blocks.</p></dd></dl></div><p>
      </p></dd><dt><span class="term"><tt>_include</tt></span></dt><dd><p>
        Include blocks can be used to integrate a text file straight into a BML
        file. Include files can be written in BML or plain text. 
      </p></dd><dt><span class="term"><tt>_e*</tt></span></dt><dd><p>
        <tt>_e*</tt> are a variety of escape blocks, each with a different purpose:
        </p><div class="variablelist"><dl><dt><span class="term"><tt>_eh</tt></span></dt><dd><p>Replace certain ASCII characters with their HTML entity counterparts</p></dd><dt><span class="term"><tt>_eb</tt></span></dt><dd><p>Replace certain ASCII characters that can trigger BML blocks (&#8216;<tt>&lt;?xml?&gt;</tt>&#8217;) with their HTML entity counterparts</p></dd><dt><span class="term"><tt>_eu</tt></span></dt><dd><p>Escape non-compliant ASCII characters in URLs</p></dd><dt><span class="term"><tt>_ea</tt></span></dt><dd><p>Escape text by passing through <tt>eh</tt> and then <tt>eb</tt></p></dd></dl></div><p>
      </p></dd><dt><span class="term"><tt>_ml</tt></span></dt><dd><p>
        Multi language blocks are used to interchange certain text blocks with the specified language-domain translation.
      </p></dd></dl></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bml.flags.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="bml.index.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="bml.api.ref.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 2. BML Block Types </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> API Documentation</td></tr></table></div></body></html>
