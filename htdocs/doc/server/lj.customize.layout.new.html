<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>1. Writing a BML Scheme</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.55.0"><link rel="home" href="index.html" title="LiveJournal Server"><link rel="up" href="lj.customize.layout.html" title="Chapter 18. BML Schemes"><link rel="previous" href="lj.customize.layout.html" title="Chapter 18. BML Schemes"><link rel="next" href="lj.customize.layout.ref.html" title="2. BML Template Reference"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1. Writing a BML Scheme</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="lj.customize.layout.html">Prev</a> </td><th width="60%" align="center">Chapter 18. BML Schemes</th><td width="20%" align="right"> <a accesskey="n" href="lj.customize.layout.ref.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><h2 class="title" style="clear: both"><a class="linkhere" href="#lj.customize.layout.new">»</a><a name="lj.customize.layout.new"></a>1. Writing a BML Scheme</h2></div></div><p>
      BML is essentially a simple macro language. Macros are called
      <i>templates</i> in BML. Templates are defined in
      <i>lookup</i> files and are <i>invoked</i> in
      BML files. Templates accept parameters and are divided into several types
      according to how parameters are transmitted and how the definition of the template is able to make
      use of them. Definitions of templates are essentially chunks of HTML with
      potentially more recursive BML template invocations inside them.
    </p><p>
      For LiveJournal, the most common templates are defined in the file
      <tt><tt>$LJHOME</tt>/cgi-bin/bml/scheme/global.look</tt>; all other
      <i>schemes</i> either replace all of the templates, or inherit whichever
      is not replaced.
    </p><p>
      To write your own scheme, all you have to do is write your own BML 
      lookup file that use the same templates as <tt><tt>$LJHOME</tt>/cgi-bin/bml/global.look</tt>.
      Then, implementing a new scheme becomes pretty painless:
      </p><div class="procedure"><p class="title"><b>Procedure 18.1. Creating a new BML scheme: <i><tt>foo</tt></i>:</b></p><ol type="1"><li><p>
          Create a new file under <tt><tt>$LJHOME</tt>/cgi-bin/bml/scheme</tt>, labelled
          after the scheme name (<i><tt>foo</tt></i>). For example:
          <tt><tt>$LJHOME</tt>/cgi-bin/bml/scheme/<i><tt>foo</tt></i>.look</tt>.
          This file should contain all of the BML directives you've written for your unique layout.
          The first line in this file should be </p><pre class="programlisting">_parent=&gt;global.look</pre><p>.
        </p></li><li><p>
          If you don't have a local BML configuration file (<tt>_config-local.bml</tt>)
          in your <tt><tt>$LJHOME</tt>/htdocs/</tt> directory, you should create one now.
          The contents of that file should look like:
          </p><div class="example"><p class="title"><b>Example 18.1. Sample <tt>_config-local.bml</tt></b></p><pre class="programlisting">DefaultScheme <i><tt>foo</tt></i></pre></div><p>
        </p></li><li><p>
          Manually restart the apache process.
        </p></li></ol></div><p>
    </p><p>
      After you've written your scheme, consider adding it to the array in <a href="lj.install.ljconfig.vars.html#ljconfig.schemes"><tt>@LJ::SCHEMES</tt></a>, so that
      your users can use their preferred scheme.
    </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="lj.customize.layout.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="lj.customize.layout.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="lj.customize.layout.ref.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 18. BML Schemes </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2. BML Template Reference</td></tr></table></div></body></html>
