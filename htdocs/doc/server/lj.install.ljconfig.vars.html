<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>1. $LJ:: Variables</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.55.0"><link rel="home" href="index.html" title="LiveJournal Server"><link rel="up" href="lj.install.ljconfig.html" title="Chapter 9. Configuring ljconfig.pl"><link rel="previous" href="lj.install.ljconfig.html" title="Chapter 9. Configuring ljconfig.pl"><link rel="next" href="lj.install.ljconfig.helpurls.html" title="2. %LJ::HELPURLS"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1. $LJ:: Variables</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="lj.install.ljconfig.html">Prev</a> </td><th width="60%" align="center">Chapter 9. Configuring ljconfig.pl</th><td width="20%" align="right"> <a accesskey="n" href="lj.install.ljconfig.helpurls.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><h2 class="title" style="clear: both"><a class="linkhere" href="#lj.install.ljconfig.vars">»</a><a name="lj.install.ljconfig.vars"></a>1. <tt>$LJ::</tt> Variables</h2></div></div><p>
    Each <tt>$LJ::</tt> variable is explained below.  There are two types:
    user-configurable ones and those that are automatically set and interesting only
    to people extending the LiveJournal code.
  </p><div class="section"><div class="titlepage"><div><h3 class="title"><a class="linkhere" href="#lj.install.ljconfig.vars.user">»</a><a name="lj.install.ljconfig.vars.user"></a>1.1. User-Configurable</h3></div></div><p>New installations will probably want to set these variables. Some are automatically set by ljdefaults.pl based on your other settings, but it wouldn't hurt to specify them all explicitly.</p><div class="variablelist"><p class="title"><b>Blob Server</b></p><dl><dt><a class="linkhere" href="#ljconfig.blobinfo">»</a><a name="ljconfig.blobinfo"></a><span class="term"><tt>%LJ::BLOBINFO</tt></span></dt><dd><p>Hash that contains the details for a number of blob servers. The format of the paramater is 'cluster' =&gt; 'director'. The webserver user also needs to be able to the directory given as the directory. If you wish to use Captcha Image and Audio Generation for Human Checks, then this is a necessary paramater</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">%BLOBINFO = (
    &quot;clusters&quot; =&gt; {
        &quot;1&quot; =&gt; &quot;/path/to/some/directory/&quot;,
    },
);</pre></div></dd><dt><a class="linkhere" href="#ljconfig.userpric_blobserver">»</a><a name="ljconfig.userpric_blobserver"></a><span class="term"><tt>$LJ::USERPRIC_BLOBSERVER</tt></span></dt><dd>If set to true, userpics are store as a file on the server rather than in the database. This depends on a Blob Server being setup in the <a href="lj.install.ljconfig.vars.html#ljconfig.blobinfo"><tt>%LJ::BLOBINFO</tt></a> section</dd></dl></div><div class="variablelist"><p class="title"><b>Capabilities/User Options</b></p><dl><dt><a class="linkhere" href="#ljconfig.allow_pics_over_quota">»</a><a name="ljconfig.allow_pics_over_quota"></a><span class="term"><tt>$LJ::ALLOW_PICS_OVER_QUOTA</tt></span></dt><dd>By default, when a user's account expires, their least often used userpics will get marked as inactive and will not be available for use. Turning this boolean setting true will circumvent this behavior.</dd><dt><a class="linkhere" href="#ljconfig.cap">»</a><a name="ljconfig.cap"></a><span class="term"><tt>%LJ::CAP</tt></span></dt><dd>A hash that defines the capability class limits. The keys are bit numbers, from 0 .. 15, and the values are hashrefs with limit names and values. Consult  for more information.</dd><dt><a class="linkhere" href="#ljconfig.cap_def">»</a><a name="ljconfig.cap_def"></a><span class="term"><tt>%LJ::CAP_DEF</tt></span></dt><dd>The default capability limits, used only when no other class-specific limit below matches.</dd><dt><a class="linkhere" href="#ljconfig.default_style">»</a><a name="ljconfig.default_style"></a><span class="term"><tt>$LJ::DEFAULT_STYLE</tt></span></dt><dd><p>A hash that defines the default S2 layers to use for accounts.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">{
     'core' =&gt; 'core1',
     'layout' =&gt; 'generator/layout',
     'i18n' =&gt; 'generator/en',
 };</pre></div></dd><dt><a class="linkhere" href="#ljconfig.email_post_domain">»</a><a name="ljconfig.email_post_domain"></a><span class="term"><tt>$LJ::EMAIL_POST_DOMAIN</tt></span></dt><dd><p>If set, and your MTA is configured, users can post to their account via username@$EMAIL_POST_DOMAIN.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">post.$DOMAIN</pre></div></dd><dt><a class="linkhere" href="#ljconfig.newuser_caps">»</a><a name="ljconfig.newuser_caps"></a><span class="term"><tt>$LJ::NEWUSER_CAPS</tt></span></dt><dd>The default capability class mask for new users.</dd><dt><a class="linkhere" href="#ljconfig.user_domain">»</a><a name="ljconfig.user_domain"></a><span class="term"><tt>$LJ::USER_DOMAIN</tt></span></dt><dd><p>If <a href="lj.install.ljconfig.vars.html#ljconfig.user_vhosts"><tt>$LJ::USER_VHOSTS</tt></a> is enabled, this will is the part of the URL that follows 'username'.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">$DOMAIN</pre></div></dd><dt><a class="linkhere" href="#ljconfig.user_email">»</a><a name="ljconfig.user_email"></a><span class="term"><tt>$LJ::USER_EMAIL</tt></span></dt><dd>Do certain users get a forwarding email address, such as user@$DOMAIN?. This requires additional mail system configuration.</dd><dt><a class="linkhere" href="#ljconfig.user_vhosts">»</a><a name="ljconfig.user_vhosts"></a><span class="term"><tt>$LJ::USER_VHOSTS</tt></span></dt><dd>If enabled, the LiveJournal installation will support username URLs of the form http://username.yoursite.com/</dd><dt><a class="linkhere" href="#ljconfig.userprop_def">»</a><a name="ljconfig.userprop_def"></a><span class="term"><tt>%LJ::USERPROP_DEF</tt></span></dt><dd><p>This option defines the userproperties that users should have by default.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">%USERPROP_DEF = (
    &quot;s1_lastn_style&quot; =&gt; 29,
    &quot;s1_friends_style&quot; =&gt; 20,
    &quot;s1_calendar_style&quot; =&gt; 2,
    &quot;s1_day_style&quot; =&gt; 11,
);</pre></div></dd></dl></div><div class="variablelist"><p class="title"><b>Human Checks</b></p><dl><dt><a class="linkhere" href="#ljconfig.human_check">»</a><a name="ljconfig.human_check"></a><span class="term"><tt>%LJ::HUMAN_CHECK</tt></span></dt><dd><p>This option enables human checks at various places throughout the site. Enabling this requires a &quot;Blob Server&quot; setup (for details of setting one up, refer to the <a href="lj.install.ljconfig.vars.html#ljconfig.blobinfo"><tt>%LJ::BLOBINFO</tt></a> section of the document.) Currently, the only option is &quot;create&quot;</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">('create' =&gt; 1);</pre></div></dd></dl></div><div class="variablelist"><p class="title"><b>Database Related</b></p><dl><dt><a class="linkhere" href="#ljconfig.clusters">»</a><a name="ljconfig.clusters"></a><span class="term"><tt>@LJ::CLUSTERS</tt></span></dt><dd><p>This  is an array that contains the names of the clusters that your configuration uses.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">qw(fast slow)</pre></div><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">(1)</pre></div></dd><dt><a class="linkhere" href="#ljconfig.dbinfo">»</a><a name="ljconfig.dbinfo"></a><span class="term"><tt>%LJ::DBINFO</tt></span></dt><dd>This is a hash that contains the necessary information to connect to your database, as well as the configuration for multiple database clusters, if your installation supports them. Consult  for more details.</dd><dt><a class="linkhere" href="#ljconfig.default_cluster">»</a><a name="ljconfig.default_cluster"></a><span class="term"><tt>$LJ::DEFAULT_CLUSTER</tt></span></dt><dd><p>The default cluster to choose when creating new accounts.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">1</pre></div></dd><dt><a class="linkhere" href="#ljconfig.dir_db">»</a><a name="ljconfig.dir_db"></a><span class="term"><tt>$LJ::DIR_DB</tt></span></dt><dd>This setting tells the installation which database to read from for directory usage. By default this is left blank, meaning that it will use the main database. This can make larger installations work much slower.</dd><dt><a class="linkhere" href="#ljconfig.dir_db_host">»</a><a name="ljconfig.dir_db_host"></a><span class="term"><tt>$LJ::DIR_DB_HOST</tt></span></dt><dd><p>The database role to use when connecting to the directory database.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">master</pre></div></dd></dl></div><div class="variablelist"><p class="title"><b>Development/Debugging Options</b></p><dl><dt><a class="linkhere" href="#ljconfig.allow_cluster_select">»</a><a name="ljconfig.allow_cluster_select"></a><span class="term"><tt>$LJ::ALLOW_CLUSTER_SELECT</tt></span></dt><dd>When set true, the journal creation page will display a drop-down list of clusters (from <a href="lj.install.ljconfig.vars.html#ljconfig.clusters"><tt>@LJ::CLUSTERS</tt></a>) along with the old 'cluster 0' which used the old db schema and the user creating an account can choose where they go. In reality, there's no use for this, it's only useful when working on the code.</dd><dt><a class="linkhere" href="#ljconfig.is_dev_server">»</a><a name="ljconfig.is_dev_server"></a><span class="term"><tt>$LJ::IS_DEV_SERVER</tt></span></dt><dd>Enable this option to signify that the server running the LiveJournal software is being used as a development server.</dd><dt><a class="linkhere" href="#ljconfig.nodb_msg">»</a><a name="ljconfig.nodb_msg"></a><span class="term"><tt>$LJ::NODB_MSG</tt></span></dt><dd><p>Message to send to users when the database is unavailable</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">Database temporarily unavailable. Try again shortly.</pre></div></dd><dt><a class="linkhere" href="#ljconfig.server_down">»</a><a name="ljconfig.server_down"></a><span class="term"><tt>$LJ::SERVER_DOWN</tt></span></dt><dd>Set true when performing maintenance that requires user activity to be minimum, such as database defragmentation and cluster movements.</dd><dt><a class="linkhere" href="#ljconfig.server_down_message">»</a><a name="ljconfig.server_down_message"></a><span class="term"><tt>$LJ::SERVER_DOWN_MESSAGE</tt></span></dt><dd><p>While <a href="lj.install.ljconfig.vars.html#ljconfig.server_down"><tt>$LJ::SERVER_DOWN</tt></a> is set true, this message will be displayed for anyone trying to access the LiveJournal installation.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">$SITENAME is down right now while we upgrade. It should be up in a few minutes.</pre></div></dd><dt><a class="linkhere" href="#ljconfig.server_down_subject">»</a><a name="ljconfig.server_down_subject"></a><span class="term"><tt>$LJ::SERVER_DOWN_SUBJECT</tt></span></dt><dd><p>While <a href="lj.install.ljconfig.vars.html#ljconfig.server_down"><tt>$LJ::SERVER_DOWN</tt></a> is set true, a message with this subject is displayed for anyone trying to access the LiveJournal installation.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">Maintenance</pre></div></dd></dl></div><div class="variablelist"><p class="title"><b>Domain Related</b></p><dl><dt><a class="linkhere" href="#ljconfig.cookie_domain">»</a><a name="ljconfig.cookie_domain"></a><span class="term"><tt>$LJ::COOKIE_DOMAIN</tt></span></dt><dd><p>Cookie domains should simply be set to .$domain.com, based on the Netscape Cookie Spec, but some older browsers don't adhere to the specs too well. <a href="lj.install.ljconfig.vars.html#ljconfig.cookie_domain"><tt>$LJ::COOKIE_DOMAIN</tt></a> can be a single string value, or it can be a perl array ref.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">[&quot;&quot;, &quot;.$DOMAIN&quot;]</pre></div><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">.$DOMAIN</pre></div></dd><dt><a class="linkhere" href="#ljconfig.coppa_check">»</a><a name="ljconfig.coppa_check"></a><span class="term"><tt>$LJ::COPPA_CHECK</tt></span></dt><dd>If set, the account creation dialog shows a checkbox, asking users if they're under 13 years old and won't let them create an account if they check it.</dd><dt><a class="linkhere" href="#ljconfig.domain">»</a><a name="ljconfig.domain"></a><span class="term"><tt>$LJ::DOMAIN</tt></span></dt><dd>The minimal domain of the site, excluding the 'www.' prefix if applicable.</dd><dt><a class="linkhere" href="#ljconfig.domain_web">»</a><a name="ljconfig.domain_web"></a><span class="term"><tt>$LJ::DOMAIN_WEB</tt></span></dt><dd>Optional. If defined and different from <a href="lj.install.ljconfig.vars.html#ljconfig.domain"><tt>$LJ::DOMAIN</tt></a>, any GET requests to <a href="lj.install.ljconfig.vars.html#ljconfig.domain"><tt>$LJ::DOMAIN</tt></a> will be redirected to <a href="lj.install.ljconfig.vars.html#ljconfig.domain_web"><tt>$LJ::DOMAIN_WEB</tt></a>.</dd><dt><a class="linkhere" href="#ljconfig.frontpage_journal">»</a><a name="ljconfig.frontpage_journal"></a><span class="term"><tt>$LJ::FRONTPAGE_JOURNAL</tt></span></dt><dd>If set, the main page of the site loads the specified journal, not the default index page. Use this if you're running a news site where there's only one journal, or one journal is dominant.</dd><dt><a class="linkhere" href="#ljconfig.imgprefix">»</a><a name="ljconfig.imgprefix"></a><span class="term"><tt>$LJ::IMGPREFIX</tt></span></dt><dd><p>The URL prefix of the image directory or subdomain.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$SITEROOT/img</pre></div></dd><dt><a class="linkhere" href="#ljconfig.server_name">»</a><a name="ljconfig.server_name"></a><span class="term"><tt>$LJ::SERVER_NAME</tt></span></dt><dd><p>Optional. If using db-based web logging, this field is stored in the database in the server column, so you can see later how well each server performed. To share the same ljconfig.pl on each host (say, over NFS), you can put something like this in your ljconfig.pl: It's kinda ugly, but it works. </p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">chomp($SERVER_NAME = `hostname`);</pre></div></dd><dt><a class="linkhere" href="#ljconfig.sitename">»</a><a name="ljconfig.sitename"></a><span class="term"><tt>$LJ::SITENAME</tt></span></dt><dd>The name of the site</dd><dt><a class="linkhere" href="#ljconfig.sitenameabbrev">»</a><a name="ljconfig.sitenameabbrev"></a><span class="term"><tt>$LJ::SITENAMEABBREV</tt></span></dt><dd><p>The abbreviated version of the name of the site.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">LJ</pre></div></dd><dt><a class="linkhere" href="#ljconfig.sitenameshort">»</a><a name="ljconfig.sitenameshort"></a><span class="term"><tt>$LJ::SITENAMESHORT</tt></span></dt><dd><p>The shortened name of the site, for brevity purposes.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">LiveJournal</pre></div></dd><dt><a class="linkhere" href="#ljconfig.siteroot">»</a><a name="ljconfig.siteroot"></a><span class="term"><tt>$LJ::SITEROOT</tt></span></dt><dd><p>The URL prefix to construct canonical pages. This can include the port number, if 80 is not in use.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">http://www.$DOMAIN:8011/</pre></div></dd><dt><a class="linkhere" href="#ljconfig.statprefix">»</a><a name="ljconfig.statprefix"></a><span class="term"><tt>$LJ::STATPREFIX</tt></span></dt><dd><p>The URL prefix to the static content directory or subdomain.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$SITEROOT/stc</pre></div></dd><dt><a class="linkhere" href="#ljconfig.tos_check">»</a><a name="ljconfig.tos_check"></a><span class="term"><tt>$LJ::TOS_CHECK</tt></span></dt><dd>If set, the account creation dialog shows a checkbox, asking users if they agree to the site's Terms of Service, and won't allow them to create an account if they refuse. This depends on a few files being located in the proper directories, namely &lt;filename&gt;tos.bml&lt;/filename&gt; and &lt;filename&gt;tos-mini.bml&lt;/filename&gt; under &lt;filename&gt;&lt;envar&gt;$LJHOME&lt;/envar&gt;/htdocs/legal/&lt;/filename&gt;. The account creation dialog can also check for new instances of the Terms of Service if the Terms of Service text is located in a CVS managed include file (&lt;filename&gt;&lt;envar&gt;$LJHOME&lt;/envar&gt;/htdocs/inc/legal-tos&lt;/filename&gt;), and if the include file includes the following line at the top: &lt;programlisting&gt;&lt;![CDATA[&lt;!-- $Revision$ --&gt;]]&gt;&lt;/programlisting&gt;</dd><dt><a class="linkhere" href="#ljconfig.userpic_root">»</a><a name="ljconfig.userpic_root"></a><span class="term"><tt>$LJ::USERPIC_ROOT</tt></span></dt><dd><p>The URL prefix to the userpic directory or subdomain.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$SITEROOT/userpic</pre></div></dd></dl></div><div class="variablelist"><p class="title"><b>Contact email addresses</b></p><dl><dt><a class="linkhere" href="#ljconfig.admin_email">»</a><a name="ljconfig.admin_email"></a><span class="term"><tt>$LJ::ADMIN_EMAIL</tt></span></dt><dd>Given as the administrative address for functions like changing passwords or information.</dd><dt><a class="linkhere" href="#ljconfig.bogus_email">»</a><a name="ljconfig.bogus_email"></a><span class="term"><tt>$LJ::BOGUS_EMAIL</tt></span></dt><dd>Used for automated notices like comment replies and general support request messages. It should be encouraged <i><tt>not</tt></i> to reply to this address.</dd><dt><a class="linkhere" href="#ljconfig.support_email">»</a><a name="ljconfig.support_email"></a><span class="term"><tt>$LJ::SUPPORT_EMAIL</tt></span></dt><dd>Used as a contact method for people to report problems with the LiveJournal installation.</dd></dl></div><div class="variablelist"><p class="title"><b>Miscellaneous settings</b></p><dl><dt><a class="linkhere" href="#ljconfig.anti_squatter">»</a><a name="ljconfig.anti_squatter"></a><span class="term"><tt>$LJ::ANTI_SQUATTER</tt></span></dt><dd>Set true if your installation is a publically available development server and if you would like beta testers to ensure that they understand as such. If left alone your installation might become susceptible to hordes of squatter accounts.</dd><dt><a class="linkhere" href="#ljconfig.disabled">»</a><a name="ljconfig.disabled"></a><span class="term"><tt>%LJ::DISABLED</tt></span></dt><dd>Boolean hash, signifying that separate parts of this LiveJournal installation are working and are avaiable to use. Consult <a href="lj.install.ljconfig.disabled.html" title="3. %LJ::DISABLED">Section 3: %LJ::DISABLED</a> for more information.</dd><dt><a class="linkhere" href="#ljconfig.dynamic_ljuser">»</a><a name="ljconfig.dynamic_ljuser"></a><span class="term"><tt>$LJ::DYNAMIC_LJUSER</tt></span></dt><dd>Boolean variable that defines whether the user-types of users is looked up when <a href="ljp.api.lj.ljuser.html" title="LJ::ljuser">LJ::ljuser</a> is called. This is not recommended unless the site is using memcached.</dd><dt><a class="linkhere" href="#ljconfig.force_empty_friends">»</a><a name="ljconfig.force_empty_friends"></a><span class="term"><tt>%LJ::FORCE_EMPTY_FRIENDS</tt></span></dt><dd><p>A hash of userids whose friends views should be disabled for performance reasons. This is useful if new accounts are auto-added to another account upon creation (described in <a href="lj.install.ljconfig.vars.html#ljconfig.initial_friends"><tt>@LJ::INITIAL_FRIENDS</tt></a>), as in most situations building a friends view for those accounts would be superflous and taxing on your installation.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">(
     234 =&gt; 1,
     232252 =&gt; 1,
);</pre></div></dd><dt><a class="linkhere" href="#ljconfig.helpurls">»</a><a name="ljconfig.helpurls"></a><span class="term"><tt>%LJ::HELPURLS</tt></span></dt><dd><p>A hash of URLs. If defined, little help bubbles appear next to common widgets to the URL you define. Consult <a href="lj.install.ljconfig.helpurls.html" title="2. %LJ::HELPURLS">Section 2: %LJ::HELPURLS</a> for more information.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">%HELPURLS = (
     &quot;accounttype&quot; =&gt; &quot;http://www.example.com/doc/faq/&quot;,
     &quot;security&quot; =&gt; &quot;http://www.example.com/doc/security&quot;,
);</pre></div></dd><dt><a class="linkhere" href="#ljconfig.hide_friendof_via_ban">»</a><a name="ljconfig.hide_friendof_via_ban"></a><span class="term"><tt>$LJ::HIDE_FRIENDOF_VIA_BAN</tt></span></dt><dd>Allows a user to hide usernames from appearing on their 'friend-of' list via use of the 'ban' mechanism.</dd><dt><a class="linkhere" href="#ljconfig.initial_friends">»</a><a name="ljconfig.initial_friends"></a><span class="term"><tt>@LJ::INITIAL_FRIENDS</tt></span></dt><dd><p>This is a list of usernames that will be added to the friends list of all newly created accounts on this installation.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">qw(news)</pre></div></dd><dt><a class="linkhere" href="#ljconfig.no_password_check">»</a><a name="ljconfig.no_password_check"></a><span class="term"><tt>$LJ::NO_PASSWORD_CHECK</tt></span></dt><dd>Set this option true if you are running an installation using ljcom code and if you haven't installed the Crypt::Cracklib perl module.</dd><dt><a class="linkhere" href="#ljconfig.protected_usernames">»</a><a name="ljconfig.protected_usernames"></a><span class="term"><tt>@LJ::PROTECTED_USERNAMES</tt></span></dt><dd><p>This is a list of regular expressions matching usernames that users on this LiveJournal installation can't create on their own.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">(&quot;^ex_&quot;, &quot;^lj_&quot;)</pre></div></dd><dt><a class="linkhere" href="#ljconfig.s2_trusted">»</a><a name="ljconfig.s2_trusted"></a><span class="term"><tt>%LJ::S2_TRUSTED</tt></span></dt><dd><p>Allows a specific user's S2 layers to run javascript, something that is considered a potential security risk and is disabled for all accounts. The hash structure is a series of userid =&gt; username pairs. Note that the system account is trusted by default, so it is not necessary to add to this hash.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">( '2' =&gt; 'whitaker', '3' =&gt; 'test', );</pre></div></dd><dt><a class="linkhere" href="#ljconfig.schemes">»</a><a name="ljconfig.schemes"></a><span class="term"><tt>@LJ::SCHEMES</tt></span></dt><dd><p>An array of hashes with keys being a BML scheme name and the values being the scheme description. When set, users can change their default BML scheme to the scheme of their choice.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">(
   { scheme =&gt; 'bluewhite', title =&gt; 'Blue White' },
   { scheme =&gt; 'lynx', title =&gt; 'Lynx' },
   { scheme =&gt; 'opalcat', title =&gt; 'Opalcat' },
);</pre></div></dd><dt><a class="linkhere" href="#ljconfig.testaccts">»</a><a name="ljconfig.testaccts"></a><span class="term"><tt>@LJ::TESTACCTS</tt></span></dt><dd><p>A list of usernames used for testing purposes. The password to these accounts cannot be changed through the user interface.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">qw(test test2);</pre></div></dd><dt><a class="linkhere" href="#ljconfig.use_acct_codes">»</a><a name="ljconfig.use_acct_codes"></a><span class="term"><tt>$LJ::USE_ACCT_CODES</tt></span></dt><dd>A boolean setting that makes the LiveJournal installation require an invitation code before anyone can create an account.Consult  for more information.</dd></dl></div><div class="variablelist"><p class="title"><b>Optimization</b></p><dl><dt><a class="linkhere" href="#ljconfig.compress_text">»</a><a name="ljconfig.compress_text"></a><span class="term"><tt>$LJ::COMPRESS_TEXT</tt></span></dt><dd>Boolean setting that compresses log and comment text in the database, to save disk space.</dd><dt><a class="linkhere" href="#ljconfig.do_gzip">»</a><a name="ljconfig.do_gzip"></a><span class="term"><tt>$LJ::DO_GZIP</tt></span></dt><dd>Boolean setting that when enabled, signals to the installation to use gzip encoding wherever possible. In most cases this is known to cut bandwidth usage in half. Requires the Compress::Zlib perl module.</dd><dt><a class="linkhere" href="#ljconfig.max_hints_lastn">»</a><a name="ljconfig.max_hints_lastn"></a><span class="term"><tt>$LJ::MAX_HINTS_LASTN</tt></span></dt><dd><p>Sets how many entries a user can have on their <tt>LASTN</tt> page. A higher value can majorly affect the speed of the installation.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">100</pre></div></dd><dt><a class="linkhere" href="#ljconfig.max_scrollback_friends">»</a><a name="ljconfig.max_scrollback_friends"></a><span class="term"><tt>$LJ::MAX_SCROLLBACK_FRIENDS</tt></span></dt><dd><p>Sets how far back someone can go on a user's <tt>FRIENDS</tt> page. A higher value can majorly affect the speed of the installation.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">1000</pre></div></dd><dt><a class="linkhere" href="#ljconfig.msg_readonly_user">»</a><a name="ljconfig.msg_readonly_user"></a><span class="term"><tt>$LJ::MSG_READONLY_USER</tt></span></dt><dd><p>Message to send to users if their account becomes readonly during maintenance.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">This journal is in read-only mode right now while database maintenance is being performed. Try again in a few minutes.</pre></div></dd><dt><a class="linkhere" href="#ljconfig.use_recent_tables">»</a><a name="ljconfig.use_recent_tables"></a><span class="term"><tt>$LJ::USE_RECENT_TABLES</tt></span></dt><dd>Only turn this on if you are using MySQL replication between multiple databases and have one or more slaves set to not replicated the logtext and talktext tables. Turning this on makes LJ duplicate all logtext &amp; talktext rows into recent_logtext &amp; recent_talktext which is then replicated. However, a cron job cleans up that table so it's never too big. LJ will try the slaves first, then the master. This is the best method of scaling your LJ installation, as disk seeks on the database for journal text is the slowest part.</dd></dl></div><div class="variablelist"><p class="title"><b>Portal Configuration</b></p><dl><dt><a class="linkhere" href="#ljconfig.portal_cols">»</a><a name="ljconfig.portal_cols"></a><span class="term"><tt>@LJ::PORTAL_COLS</tt></span></dt><dd><p>This is a list that specifies which columns can be used for the portal pages.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">qw(main right moz)</pre></div></dd><dt><a class="linkhere" href="#ljconfig.portal_logged_in">»</a><a name="ljconfig.portal_logged_in"></a><span class="term"><tt>$LJ::PORTAL_LOGGED_IN</tt></span></dt><dd><p>The default positions for portal boxes that a user will see when they are logged in.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">{'main' =&gt; [ 
             [ 'update', 'mode=full'],
             ],
 'right' =&gt;  [ 
             [ 'stats', '', ],
             [ 'bdays', '', ],
             [ 'popfaq', '', ],
 ] };</pre></div></dd><dt><a class="linkhere" href="#ljconfig.portal_logged_out">»</a><a name="ljconfig.portal_logged_out"></a><span class="term"><tt>$LJ::PORTAL_LOGGED_OUT</tt></span></dt><dd><p>The default positions for portal boxes that a user will see when they are logged out.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">{'main' =&gt; [ 
             [ 'update', 'mode='],
             ],
 'right' =&gt;  [ 
             [ 'login', '', ],
             [ 'stats', '', ],
             [ 'randuser', '', ],
             [ 'popfaq', '', ],
             ],
 'moz' =&gt;    [
             [ 'login', '', ],
             ],
};</pre></div></dd><dt><a class="linkhere" href="#ljconfig.portal_uri">»</a><a name="ljconfig.portal_uri"></a><span class="term"><tt>$LJ::PORTAL_URI</tt></span></dt><dd><p>The URI to the portal. Only two options are supported at this time, '/portal/' and '/'.</p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">/portal/</pre></div></dd></dl></div><div class="variablelist"><p class="title"><b>Syndicated Account Options</b></p><dl><dt><a class="linkhere" href="#ljconfig.syn_lastn_s1">»</a><a name="ljconfig.syn_lastn_s1"></a><span class="term"><tt>$LJ::SYN_LASTN_S1</tt></span></dt><dd>When set to an appropriate <tt>LASTN</tt> style, all syndicated accounts on this installation will use this style.</dd><dt><a class="linkhere" href="#ljconfig.synd_cluster">»</a><a name="ljconfig.synd_cluster"></a><span class="term"><tt>$LJ::SYND_CLUSTER</tt></span></dt><dd>Syndicated accounts tend to have more database traffic than normal accounts, so its a good idea to set up a seperate cluster for them.If set to a cluster (defined by <a href="lj.install.ljconfig.vars.html#ljconfig.clusters"><tt>@LJ::CLUSTERS</tt></a>), all newly created syndicated accounts will reside on that cluster.</dd></dl></div><div class="variablelist"><p class="title"><b>System Tools</b></p><dl><dt><a class="linkhere" href="#ljconfig.sendmail">»</a><a name="ljconfig.sendmail"></a><span class="term"><tt>$LJ::SENDMAIL</tt></span></dt><dd><p>The system path to the sendmail program, along with any necessary parameters.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">&quot;/usr/bin/sendmail -t&quot;</pre></div></dd><dt><a class="linkhere" href="#ljconfig.smtp_server">»</a><a name="ljconfig.smtp_server"></a><span class="term"><tt>$LJ::SMTP_SERVER</tt></span></dt><dd><p>This the recommended system to use for sending email. This requires the perl Net::SMTP module to work properly.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">10.2.0.1</pre></div></dd><dt><a class="linkhere" href="#ljconfig.speller">»</a><a name="ljconfig.speller"></a><span class="term"><tt>$LJ::SPELLER</tt></span></dt><dd><p>The system path to a spell checking binary, along with any necessary parameters.</p><p><span class="emphasis"><em>Example:</em></span> </p><div class="informalexample"><pre class="programlisting">&quot;/usr/local/bin/aspell pipe --sug-mode=fast --ignore-case&quot;</pre></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><h3 class="title"><a class="linkhere" href="#lj.install.ljconfig.vars.auto">»</a><a name="lj.install.ljconfig.vars.auto"></a>1.2. Auto-Configured</h3></div></div><p>These <tt>$LJ::</tt> settings are automatically set in <tt>ljdefaults.pl</tt>. They're only documented here for people interested in extending LiveJournal. Or, you can define them in <tt>ljconfig.pl</tt> ahead of time so you can use them in definitions of future variables. </p><div class="variablelist"><p class="title"><b>Configuration Directories</b></p><dl><dt><a class="linkhere" href="#ljconfig.bin">»</a><a name="ljconfig.bin"></a><span class="term"><tt>$LJ::BIN</tt></span></dt><dd><p>Points to the under bin directory under <tt><a href="lj.install.ljhome.html" title="1. $LJHOME Environment Variable">\$LJHOME</a></tt></p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$HOME/bin</pre></div></dd><dt><a class="linkhere" href="#ljconfig.home">»</a><a name="ljconfig.home"></a><span class="term"><tt>$LJ::HOME</tt></span></dt><dd><p>Set to the same value as <tt><a href="lj.install.ljhome.html" title="1. $LJHOME Environment Variable">\$LJHOME</a></tt></p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$ENV{'LJHOME'}</pre></div></dd><dt><a class="linkhere" href="#ljconfig.htdocs">»</a><a name="ljconfig.htdocs"></a><span class="term"><tt>$LJ::HTDOCS</tt></span></dt><dd><p>Points to the htdocs directory under <tt><a href="lj.install.ljhome.html" title="1. $LJHOME Environment Variable">\$LJHOME</a></tt></p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$HOME/htdocs</pre></div></dd><dt><a class="linkhere" href="#ljconfig.temp">»</a><a name="ljconfig.temp"></a><span class="term"><tt>$LJ::TEMP</tt></span></dt><dd><p>Points to the temp directory under <tt><a href="lj.install.ljhome.html" title="1. $LJHOME Environment Variable">\$LJHOME</a></tt></p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$HOME/temp</pre></div></dd><dt><a class="linkhere" href="#ljconfig.var">»</a><a name="ljconfig.var"></a><span class="term"><tt>$LJ::VAR</tt></span></dt><dd><p>Points to the var directory under <tt><a href="lj.install.ljhome.html" title="1. $LJHOME Environment Variable">\$LJHOME</a></tt></p><p><span class="emphasis"><em>Default:</em></span> </p><div class="informalexample"><pre class="programlisting">$HOME/var</pre></div></dd></dl></div><div class="variablelist"><p class="title"><b>Internationalization</b></p><dl><dt><a class="linkhere" href="#ljconfig.unicode">»</a><a name="ljconfig.unicode"></a><span class="term"><tt>$LJ::UNICODE</tt></span></dt><dd>Boolean setting that allows UTF-8 support. This is enabled by default.</dd></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="lj.install.ljconfig.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="lj.install.ljconfig.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="lj.install.ljconfig.helpurls.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 9. Configuring ljconfig.pl </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2. %LJ::HELPURLS</td></tr></table></div></body></html>
