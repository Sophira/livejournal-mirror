<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>Chapter 11. Protocol Versions</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.55.0"><link rel="home" href="index.html" title="LiveJournal Server"><link rel="up" href="ljp.csp.protocol.html" title="Part III. Client/Server Protocol"><link rel="previous" href="ljp.csp.blogger.html" title="Chapter 10. Supporting the Blogger API"><link rel="next" href="ljp.csp.proplist.html" title="Chapter 12. Journal Item Meta-data"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 11. Protocol Versions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ljp.csp.blogger.html">Prev</a> </td><th width="60%" align="center">Part III. Client/Server Protocol</th><td width="20%" align="right"> <a accesskey="n" href="ljp.csp.proplist.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><h2 class="title"><a class="linkhere" href="#ljp.csp.versions">»</a><a name="ljp.csp.versions"></a>Chapter 11. Protocol Versions</h2></div></div><p>
    The LiveJournal protocol (so far) has been more or less static; while new
    modes have been added, the basic operation has not changed much. However,
    recent introduction of Unicode support in LiveJournal necessitated changes
    in the way text is encoded in protocol requests and responses. In order to
    allow new clients to take advantage of Unicode support and at the same time
    avoid breaking existing clients, a versioning scheme has been put into the
    protocol. The client sends the number of the highest protocol version it
    supports in every request, inside a <tt>ver</tt> attribute; version
    <tt>0</tt> is implicit if the client does not send the 
    <tt>ver</tt> attribute. Currently there are two versions of the 
    protocol, and the Unicode-enabled server code supports both of them.
  </p><div class="itemizedlist"><ul type="disc"><li><p><b>Version <tt>0</tt>. </b>
      If a client does not send a <tt>ver</tt> key on a request, 
      it assumed to support protocol Version <tt>0</tt>. In protocol
      Version <tt>0</tt>, textual information transmitted from or to
      the server is always assumed to be a stream of 8-bit bytes, not necessarily
      ASCII, but without any guarantee that the 
      non-ASCII bytes are presented in any particular encoding.
    </p></li><li><p><b>Version <tt>1</tt>. </b>
      Version <tt>1</tt> differs from Version <tt>0</tt> only
      by imposing additional requirements on the text transmitted through requests
      and responses; there aren't any changes in protocol modes. The additional
      requirements are that in a Version <tt>1</tt> request, the client
      <span class="emphasis"><em>must</em></span> transmit all textual information as a stream of 
      Unicode data encoded in UTF-8; the server <span class="emphasis"><em>must</em></span>
      respond to Version <tt>1</tt> requests with Version <tt>1</tt>
      responses; in such Version <tt>1</tt> responses, the server 
      <span class="emphasis"><em>must</em></span> also transmit all textual information encoded in 
      UTF-8; and the client <span class="emphasis"><em>must</em></span> expect that
      and handle such responses correctly. In other words, all information transmitted
      via protocol when Version <tt>1</tt> is used is always encoded in 
      UTF-8. UTF-8 is a representation of Unicode
      in a bytestream format compatible with ASCII. 
      <sup>[<a name="unicode" href="#ftn.unicode">12</a>]</sup>
   </p></li></ul></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.unicode" href="#unicode">12</a>] </sup>See the <a href="http://www.unicode.org/" target="_top">Unicode Consortium website<span class="ulink"><img src="/img/globe.gif" alt="[o]">»</span></a>
      for more information on Unicode and UTF-8.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ljp.csp.blogger.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ljp.csp.protocol.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ljp.csp.proplist.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 10. Supporting the Blogger API </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 12. Journal Item Meta-data</td></tr></table></div></body></html>
