<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>4. Operators</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="S2 Manual">
<link rel="up" href="langref.html" title="Chapter 4. Language Reference">
<link rel="prev" href="langref.variables.html" title="3. Variables">
<link rel="next" href="langref.statements.html" title="5. Statements">
<meta name="date" content="2008-Jun-03">
</head>
<body>
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">4. Operators</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="langref.variables.html">Prev</a> </td>
<th width="60%" align="center">Chapter 4. Language Reference</th>
<td width="20%" align="right"> <a accesskey="n" href="langref.statements.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both" id="langref.operators">4. Operators</h2></div></div></div>
<p>S2 operators have the following associativity and precedence, listed
  from highest precedence to lowest.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>left</td>
<td>Terms (literals, expressions in
        parentheses, variables, function/method calls, named unary
        operators)</td>
</tr>
<tr>
<td>nonassoc</td>
<td>++ --</td>
</tr>
<tr>
<td>left</td>
<td>instanceof isa as</td>
</tr>
<tr>
<td>right</td>
<td>not -</td>
</tr>
<tr>
<td>left</td>
<td>* / %</td>
</tr>
<tr>
<td>left</td>
<td>+ -</td>
</tr>
<tr>
<td>nonassoc</td>
<td>&lt; &gt; &lt;= &gt;=</td>
</tr>
<tr>
<td>nonassoc</td>
<td>== !=</td>
</tr>
<tr>
<td>left</td>
<td>and</td>
</tr>
<tr>
<td>left</td>
<td>or</td>
</tr>
<tr>
<td>nonassoc</td>
<td>..</td>
</tr>
<tr>
<td>nonassoc</td>
<td>? :</td>
</tr>
<tr>
<td>right</td>
<td>=</td>
</tr>
</tbody>
</table></div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.operators.arithmetic">4.1. Arithmetic Operators</h3></div></div></div>
<p>The S2 language has the usual set of arithmetic operators you'd
    expect to find in a programming language. These are the same as the
    arithmetic operators in perl.</p>
<p>As you might expect, these operators can only be applied to integers,
    and will return integers.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><code class="literal">+</code></td>
<td>binary</td>
<td>Addition</td>
</tr>
<tr>
<td><code class="literal">-</code></td>
<td>binary</td>
<td>Subtraction</td>
</tr>
<tr>
<td><code class="literal">*</code></td>
<td>binary</td>
<td>Multiplication</td>
</tr>
<tr>
<td><code class="literal">/</code></td>
<td>binary</td>
<td>Division</td>
</tr>
<tr>
<td><code class="literal">%</code></td>
<td>binary</td>
<td>Modulus (remainder)</td>
</tr>
<tr>
<td><code class="literal">++</code></td>
<td>unary</td>
<td>Increment in-place</td>
</tr>
<tr>
<td><code class="literal">--</code></td>
<td>unary</td>
<td>Decrement in-place</td>
</tr>
<tr>
<td><code class="literal">-</code></td>
<td>unary</td>
<td>Negation</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.operators.comparison">4.2. Comparison Operators</h3></div></div></div>
<p>These operators allow you to compare one value to another. Both operands
    must be of the same type, and all but simple equality/inequality can only be applied to
    integers. Only primitive types may be compared with these operators.
    All comparison operators return  a boolean value.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><code class="literal">==</code></td>
<td>binary</td>
<td>Equals</td>
</tr>
<tr>
<td><code class="literal">!=</code></td>
<td>binary</td>
<td>Does not equal</td>
</tr>
<tr>
<td><code class="literal">&lt;</code></td>
<td>binary</td>
<td>Less than</td>
</tr>
<tr>
<td><code class="literal">&gt;</code></td>
<td>binary</td>
<td>Greater than</td>
</tr>
<tr>
<td><code class="literal">&lt;=</code></td>
<td>binary</td>
<td>Less than or equal to</td>
</tr>
<tr>
<td><code class="literal">&gt;=</code></td>
<td>binary</td>
<td>Greater than or equal to</td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.operators.logical">4.3. Logical Operators</h3></div></div></div>
<p>These operators perform logical operations on boolean values. All operands
must be boolean, and a boolean value results.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><code class="literal">and</code></td>
<td>binary</td>
<td>Logical AND</td>
</tr>
<tr>
<td><code class="literal">or</code></td>
<td>binary</td>
<td>Logical OR</td>
</tr>
<tr>
<td><code class="literal">not</code></td>
<td>unary</td>
<td>Logical complement</td>
</tr>
</tbody>
</table></div>
<p>In summary, AND returns true if and only if both of its operands are
true. OR returns true if one or both of its operands are true. NOT returns
true if its operand is false, and false otherwise.</p>
<p>The two binary logical operators are usually used in an
<code class="literal">if</code> statement to include two or more comparisons.</p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.operators.type">4.4. Type Conversion/Testing Operators</h3></div></div></div>
<p>These functions operate on object values only. Their left operand is
the subject, while the right operand is a class name.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><code class="literal">isa</code></td>
<td>Returns true if the object
    can be typecasted to the given class</td>
<td class="auto-generated"> </td>
</tr>
<tr>
<td><code class="literal">instanceof</code></td>
<td>Returns true if
    the type of the object is exactly the classname given.</td>
<td class="auto-generated"> </td>
</tr>
<tr>
<td><code class="literal">as</code></td>
<td>Cast the given value to
    the classname given, but only if the object's runtime type is compatible.
    If not, returns a null object.</td>
<td class="auto-generated"> </td>
</tr>
</tbody>
</table></div>
<p>The S2 language uses <span class="emphasis"><em>dynamic binding</em></span>, which
means that an object's type may be a subclass of the class of the variable
which holds it. These functions allow the programmer to test the runtime type
and, assuming the runtime type is compatible, convert (or <span class="emphasis"><em>cast</em></span>)
to a different variable type.</p>
<p>When calling methods on an object, it is the type of the object which
determines which function will be called, not the type of the variable on
which the arrow operator is applied.</p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.operators.other">4.5. Other Operators</h3></div></div></div>
<p>These operators don't really fit into a category of their own, and
have perhaps non-obvious functions.</p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title" id="id2802456">4.5.1. The assignment operator: <code class="literal">=</code>
</h4></div></div></div>
<p>The assignment operator (which should not be confused with the
    equality test operator, <code class="literal">==</code>), is used to assign a value
    to a named variable. This means that unlike most other operators, its left
    operand <span class="emphasis"><em>must</em></span> be a variable name. No other kind of
    expression will do.</p>
<p>The assignment operator can take operands of any type, but the
    right-hand operand must be of the same type as the variable given on the left, or
    <span class="emphasis"><em>coercable</em></span> into that type.</p>
<p>The assignment operator also returns whatever value it has just
    assigned to the variable, meaning that you can chain several assignments
    together as follows:
    </p>
<pre class="programlisting">$foo = $bar = $baz = 2;</pre>
<p>
    In this case, <code class="varname">$foo</code>, <code class="varname">$bar</code> and
    <code class="varname">$baz</code> will all be assigned the value 2.</p>
<p>As a special case, assignment can also be used when declaring local
    variables:
    </p>
<pre class="programlisting">var string $name = "John";</pre>
<p>
    However, this is only true for local variables. Class variables cannot be
    initialized in this way.</p>
<p>The symbol <code class="literal">=</code> is used for several other
    assignment-like things in the S2 language, including setting property
    values and layerinfo. These aren't really assignment, but act similarly
    and in the case of property setting follow many of the rules described
    above.</p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title" id="id2802538">4.5.2. String Concatenation with <code class="literal">+</code>
</h4></div></div></div>
<p>The <code class="literal">+</code> symbol actually has two purposes in the S2
    language. When one of its operands is a string, it becomes
    the <span class="emphasis"><em>string concatenation operator</em></span>.
    In this form, it will firstly attempt to coerce any non-string operand
    into a string, then stick the two strings together to form a resulting
    string which is returned.</p>
<p>The simplest form of string concatenation involves two strings.
    In this case, both strings are just concatenated and that is it. However,
    as long as one operand remains a string, the other operand can be an
    integer, a boolean or an object with certain conditions. Objects may
    only be concatenated to strings if their class has
    an <code class="function">as_string()</code> method which returns a string.
    The return value of this method will be used as the string value for
    concatenation.</p>
<p>String literals with interpolated variables are really just concatenation
    with a more convenient syntax, which is why you are able to interpolate
    integers and certain objects directly into string literals.</p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title" id="id2802588">4.5.3. The ternary conditional operator <code class="literal">? :</code>
</h4></div></div></div>
<p>This is the only operator in the S2 language with three operands.
    Its function can be thought of as being like an
    <code class="literal">if</code> statement in the form of an operator.</p>
<p>This operator is best explained with an example:
    </p>
<pre class="programlisting">$label = ($c == 1 ? "1 comment" : "$c comments");</pre>
<p>
    In this example, the conditional operator and its operands are enclosed
    in parenthesis for clarity. These are optional, but can make things more
    readable. The first operand, preceding the question-mark symbol, is a
    boolean expression. In this case it is an equality test. If this
    expression evaluates to true, the second operand, which is after the
    question-mark and before the colon, is returned. If the expression is
    false, the third operand is returned.</p>
<p>The first operand <span class="emphasis"><em>must</em></span> be a boolean
    expression. The second and third operands can be of any type but their
    types must match. The return type of this operator is the same as that
    of the second and third operand. In the above example, then, the return
    type would be string.</p>
<p>In all cases an <code class="literal">if</code> construct can be used in place
    of this operator, but the conditional operator is shorter and more readable
    in some cases.</p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title" id="id2802651">4.5.4. The range operator <code class="literal">..</code>
</h4></div></div></div>
<p>This rather quirky operator is borrowed from Perl. It takes two
    integer operands and returns an array of integers containing all integers
    between the first and second operand, inclusive. For example:
    </p>
<pre class="programlisting">var int[] list = 1 .. 10;</pre>
<p>
    The array <code class="varname">$list</code> will now contain ten elements,
    each numbered in order from 1 to 10. This has the same effect as:
    </p>
<pre class="programlisting">var int[] list = [1,2,3,4,5,6,7,8,9,10];</pre>
<p>This operator is really only useful for creating a loop which will
    iterate a certain number of times:
    </p>
<pre class="programlisting">foreach var int i (1 .. 10) { println "Iteration number $i"; }</pre>
<p>
    This example will print ten lines, each containing a number from 1 to 10
    in order.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>Some readers will probably balk at the use of an array of
    integers to create a loop such as this, as it would use more memory than a
    conventional <code class="literal">for</code> loop from a general programming
    language.</p>
<p>However, you don't have to worry. The above idiom is optimised
    to an efficient form at compile time, so there is no memory wasted.</p>
</div>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="langref.operators.unary">4.6. Named Unary Operators</h3></div></div></div>
<p>The following are the built-in named operators. You do not have to
    wrap the following term in parentheses.</p>
<div class="variablelist"><dl>
<dt><span class="term"><code class="function">isnull</code> <code class="varname">$object</code></span></dt>
<dd>returns a boolean: true if <code class="varname">$object</code> is
    null (has no value)</dd>
<dt><span class="term"><code class="function">defined</code> <code class="varname">$object</code></span></dt>
<dd>opposite of <code class="function">isnull</code>. might be
      prettier than negating <code class="function">isnull</code>
</dd>
<dt><span class="term"><code class="function">new</code> <code class="varname">ClassName</code></span></dt>
<dd>returns an instance of <code class="varname">ClassName</code> 
      with all members empty or zero</dd>
<dt><span class="term"><code class="function">null</code> <code class="varname">ClassName</code></span></dt>
<dd>returns an undefined value of type
      <code class="varname">ClassName</code>
</dd>
<dt><span class="term"><code class="function">reverse</code> <code class="varname">$string</code></span></dt>
<dd>returns copy of <code class="varname">$string</code> with
      characters reversed</dd>
<dt><span class="term"><code class="function">reverse</code> <code class="varname">$array</code></span></dt>
<dd>returns shallow copy of <code class="varname">$array</code> with
      elements reversed.</dd>
<dt><span class="term"><code class="function">size</code> <code class="varname">$string</code></span></dt>
<dd><p>returns number of <span class="emphasis"><em>bytes</em></span> in
      <code class="varname">$string</code>. This behavior is deprecated. Please see note
      below.</p></dd>
<dt><span class="term"><code class="function">size</code> <code class="varname">$array</code></span></dt>
<dd>returns number of elements in
      <code class="varname">$array</code>
</dd>
</dl></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>The use of the <code class="function">size</code> operator on strings
    is deprecated and will be removed or updated without notice. Instead, you
    should use  the string class's length method to get the number
    of <span class="emphasis"><em>characters</em></span>. Remember that some characters
    are represented by more than one byte.</p>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="langref.variables.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="langref.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="langref.statements.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">3. Variables </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 5. Statements</td>
</tr>
</table>
</div>
</body>
</html>
