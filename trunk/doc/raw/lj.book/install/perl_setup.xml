<chapter id="lj.install.perl_setup">
  <title>Installing and Setting up Perl</title>
  <section id="perl_install">
    <title>Installing Perl</title>
    <para>
      Perl offers distrobutions for many operating aystems, including Win32 and almost all of the different <quote>flavors</quote> of Unix. Installations on any of these systems should be fairly easy, as most offer a simple installation program that guides you through setup.
    </para>
    <para>
      The complete Perl documentation is included with every Perl install, so if you have any Perl specific questions, you might want to refer to the specific documentation first. As quoted from the Perl FAQs: <quote>The complete Perl documentation is available with the Perl distribution. If you have Perl installed locally, you probably have the documentation installed as well: type man perl if you're on a system resembling Unix. This will lead you to other important man pages, including how to set your $MANPATH. If you're not on a Unix system, access to the documentation will be different; for example, it might be only in HTML format. But all proper Perl installations have fully-accessible documentation.</quote>
      <footnote><para>For comprehensive information on obtaining and installing perl, please refer to <ulink url="http://www.perldoc.com/perl5.6/pod/perlfaq2.html">perlfaq2</ulink></para></footnote>
    </para>
  </section>
  <section id="lj.install.perl_setup.modules">
  <title>Installing Perl Modules</title>
  <para>
    LiveJournal requires several Perl modules to be installed. Installing these modules requires a fully working perl and C development environment (including gcc and make).
  </para>
  <para>
    If you are unfamilar with installing modules, the simplest method is to enter the following command from a root shell prompt:
  </para>
  <para>
    <screen><prompt>#</prompt> <userinput>perl -MCPAN -e shell</userinput></screen>
  </para>
  <para>
    Once the Perl interpreter has loaded (and been configured), you can install modules by issuing the command <literal>install MODULENAME</literal>.
  </para>
  <para>
    The first thing you should do is upgrade your CPAN:
  </para>
  <para>
    <screen><prompt>cpan></prompt> <userinput>install Bundle::CPAN</userinput></screen>
  </para>
  <para>
    Once it's done, type:
  </para>
  <para>
    <screen><prompt>cpan></prompt> <userinput>reload cpan</userinput></screen>
  </para>
  <para>
    Now, install the following modules:
  </para>
  <para>
    <itemizedlist>
      <listitem><para>DBD::mysql</para></listitem>
      <listitem><para>DBI</para></listitem>
      <listitem><para>Digest::MD5</para></listitem>
      <listitem><para>Image::Size</para></listitem>
      <listitem><para>MIME::Lite</para></listitem>
      <listitem><para>Compress::Zlib</para></listitem>
      <listitem><para>MIME::Base64</para></listitem>
      <listitem><para>URI::URL</para></listitem>
      <listitem><para>HTML::Tagset</para></listitem>
      <listitem><para>HTML::Parser</para></listitem>
      <listitem><para>LWP::Simple</para></listitem>
      <listitem><para>LWP::UserAgent</para></listitem>
      <listitem><para>GD</para></listitem>
      <listitem><para>GD::Graph</para></listitem>
      <listitem><para>GD::Text</para></listitem>
      <listitem><para>Bundle::Mysql</para></listitem>
      <listitem><para>Mail::Address</para></listitem>
      <listitem><para>Proc::ProcessTable</para></listitem>
      <listitem><para>SOAP::Lite</para></listitem>
      <listitem><para>Unicode::MapUTF8</para></listitem>
    </itemizedlist>
  </para>
  <para>
    If you're using Debian this should get everything:
  </para>
  <para>
    <screen><prompt>#</prompt> <userinput>apt-get install libwww-perl libmime-perl libmime-lite-perl \
  libsoap-lite-perl libgd-perl liburi-perl \
  libimage-size-perl libdbd-mysql-perl libdbi-perl \
  libnet-perl libdigest-md5-perl libgd-graph-perl \
  libgd-text-perl libcompress-zlib-perl \
  libunicode-maputf8-perl libproc-process-perl libapache-mod-perl</userinput></screen>
  </para>
  <note>
    <title>Windows Install</title>
    <para>
      If using ActiveState's Win32 Perl installation, we recommend using Perl Package Manager<footnote id="ppm.faq"><para><ulink url="http://aspn.activestate.com/ASPN/Products/ActivePerl-5.6/faq/ActivePerl-faq2.html">PPM FAQ</ulink></para></footnote> to install the following modules:
      <itemizedlist>
        <listitem><para>libwww-perl</para></listitem>
        <listitem><para>DBD::mysql</para></listitem>
        <listitem><para>DBI</para></listitem>
        <listitem><para>Digest::MD5</para></listitem>
        <listitem><para>Image::Size</para></listitem>
        <listitem><para>MIME::Lite</para></listitem>
        <listitem><para>MIME::Base64</para></listitem>
        <listitem><para>HTML::Tagset</para></listitem>
        <listitem><para>HTML::Parser</para></listitem>
        <listitem><para>GD</para></listitem>
        <listitem><para>GDGraph</para></listitem>
        <listitem><para>GDTextUtil</para></listitem>
        <listitem><para>MailTools</para></listitem>
        <listitem><para>SOAP::Lite</para></listitem>
        <listitem><para>Unicode::String</para></listitem>
        <listitem><para>Unicode::Map</para></listitem>
      </itemizedlist>
    </para>
    <para>
      The following packages are currently <emphasis role="bold">Not</emphasis> available through PPM. 
      You will need to have a make utility and a C++ compiler:
      <itemizedlist>
        <listitem><para>Compress::Zlib</para></listitem>
        <listitem><para>Jcode</para></listitem>
        <listitem><para>Unicode::Map8</para></listitem>
        <listitem><para>Unicode::MapUTF8</para></listitem>
      </itemizedlist>
    </para>
  </note>
  <note>
    <para>
      There used to be three custom <filename>LJ::</filename> modules that needed installing.
      We no longer install those in the system.  
      Instead LJ uses them right out of <filename>/cgi-bin/LJ/*</filename>.  
      If you have those old LJ modules installed, it's best to go remove them since Perl will prefer system-level ones over local ones.
    </para>
  </note>
  <para>
    To ensure that you have installed the necessary modules, be sure to run the included tool: <filename>/bin/checkconfig.pl</filename>. 
    If <filename>checkconfig.pl</filename> doesn't detect all of the required modules, it will tell you which ones you are missing.
  </para>
  </section>
</chapter>