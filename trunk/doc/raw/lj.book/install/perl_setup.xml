<chapter id="lj.install.perl_setup">
  <title>Installing and Setting up Perl</title>
  <section id="lj.install.perl_setup.install">
    <title>Installing Perl</title>
    <para>
      Perl offers distributions for many operating systems, including Win32 and 
      almost all of the different <quote>flavors</quote> of Unix. Installations
      on any of these systems should be fairly easy, as most offer a simple
      installation program that guides you through setup.
    </para>
    <para>
      The complete Perl documentation is included with every Perl install, so if
      you have any Perl specific questions, you might want to refer to the
      specific documentation first. As quoted from the Perl FAQs: <quote>The
      complete Perl documentation is available with the Perl distribution. If you
      have Perl installed locally, you probably have the documentation installed
      as well: type man perl if you're on a system resembling Unix. This will lead
      you to other important man pages, including how to set your $MANPATH. If you're
      not on a Unix system, access to the documentation will be different; for
      example, it might be only in HTML format. But all proper Perl installations
      have fully-accessible documentation.</quote>
      <footnote><para>
        Consult <citetitle pubwork="article"><ulink url="http://www.perldoc.com/perl5.6/pod/perlfaq2.html">
        Obtaining and Learning about Perl (perlfaq2)</ulink></citetitle>
      </para></footnote>
    </para>
  </section>
  <section id="lj.install.perl_setup.modules">
    <title>Installing Perl Modules</title>
    <para>
      LiveJournal requires several Perl modules to be installed. Installing these
      modules requires a fully working perl and C development environment
      (including a C compiler and make tool).
    </para>
    <note><para>
      Some modules such as GD and Compress::Zlib require certain C libraries to be pre-installed
      on your machine in order to work. Please read the author-provided README files for each
      module before proceeding further.  
    </para></note>
    <formalpara><title>Debian Install</title><para>
      If you're using Debian this should get every required module:
    </para></formalpara>

<screen><prompt>#</prompt> <userinput>apt-get install libdbi-perl libdbd-mysql-perl libdigest-md5-perl \
libimage-size-perl libmime-lite-perl libmime-perl \
libmime-base64-perl liburi-perl libhtml-tagset-perl \
libhtml-parser-perl libwww-perl libmailtools-perl \
libunicode-maputf8-perl libstorable-perl</userinput></screen>

    <para>For the optional modules just run:</para>

<screen><prompt>#</prompt> <userinput>apt-get install libcompress-zlib-perl libnet-perl \
libgd-graph-perl libproc-process-perl libsoap-lite-perl \
libxml-rss-perl libstring-crc32-perl</userinput></screen>
        
    <formalpara><title>Using CPAN</title><para>
      Otherwise you'll want to use CPAN to install the modules by performing the following steps:
    </para></formalpara>

    <para>From the root prompt on your server, invoke the CPAN shell:</para>

<screen><prompt>#</prompt> <userinput>perl -MCPAN -e shell</userinput></screen>

    <para>
      Once the Perl interpreter has loaded (and been configured), you can install
      modules by issuing the command <literal>install <replaceable>MODULENAME</replaceable></literal>.
    </para>
    <para>The first thing you should do is upgrade your CPAN:</para>

<screen><prompt>cpan></prompt> <userinput>install Bundle::CPAN</userinput></screen>

    <para>Once it's done, type:</para>

      <screen><prompt>cpan></prompt> <userinput>reload cpan</userinput></screen>

    <para>Now, install the following modules:</para>
    <itemizedlist>
      <title>Required</title>
      <listitem><simpara>DBD::mysql</simpara></listitem>
      <listitem><simpara>DBI</simpara></listitem>
      <listitem><simpara>Digest::MD5</simpara></listitem>
      <listitem><simpara>Image::Size</simpara></listitem>
      <listitem><simpara>MIME::Lite</simpara></listitem>
      <listitem><simpara>MIME::Words</simpara></listitem>
      <listitem><simpara>MIME::Base64</simpara></listitem>
      <listitem><simpara>URI::URL</simpara></listitem>
      <listitem><simpara>HTML::Tagset</simpara></listitem>
      <listitem><simpara>HTML::Parser</simpara></listitem>
      <listitem><simpara>LWP::Simple</simpara></listitem>
      <listitem><simpara>LWP::UserAgent</simpara></listitem>
      <listitem><simpara>Mail::Address</simpara></listitem>
      <listitem><simpara>Unicode::MapUTF8</simpara></listitem>
      <listitem><simpara>Storable</simpara></listitem>
    </itemizedlist>
    <itemizedlist>
      <title>Optional</title>
      <listitem><simpara>Compress::Zlib</simpara></listitem>
      <listitem><simpara>Net::SMTP</simpara></listitem>
      <listitem><simpara>GD::Graph</simpara></listitem>
      <listitem><simpara>Proc::ProcessTable</simpara></listitem>
      <listitem><simpara>SOAP::Lite</simpara></listitem>
      <listitem><simpara>XML::RSS</simpara></listitem>
      <listitem><simpara>String::CRC32</simpara></listitem>
    </itemizedlist>
    <note>
      <para>
        There used to be a few custom <filename>LJ::</filename> modules that
        needed installing. Those no longer need to be installed on the system,
        as LJ uses them right out of <filename>/cgi-bin/*</filename> instead.
        If by chance you have those old LJ modules installed, it's best to go
        remove them since Perl will prefer system-level ones over the (newer)
        local ones.
      </para>
    </note>
    <important><para>
      To ensure that you have installed the necessary modules, be sure to
      run the included tool: <filename><envar>$LJHOME</envar>/bin/checkconfig.pl</filename>. 
      If <application>checkconfig.pl</application> doesn't detect all of the
      required modules, it will tell you which ones you are missing. Note that this tool will
      fail after checking for modules, because it will also check for a database connection, which
      hasn't been set up yet. This will be fixed later when we add options to 
      <application>checkconfig.pl</application> to detect for specific sections of installation.
    </para></important>
  </section>
</chapter>
<!--
Local Variables:
mode:sgml
sgml-parent-document: ("index.xml" "part" "chapter")
End:
-->
